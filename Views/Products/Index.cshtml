@using magero_store.Models
@model IEnumerable<Product>
@{
    ViewData["Title"] = "Shop title";
    Layout = "_Layout";
}

<div class="container">
    <!-- Header with image -->
    <section style="position: relative; width: 100%; height: 720px; background-color: #F7F7F7; border-radius: 8px; margin-bottom: 80px; display: flex; align-items: center; justify-content: center;">
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.24); border-radius: 8px;"></div>
        <div style="position: relative; z-index: 1; text-align: center; color: white; max-width: 844px;">
            <h1 style="color: #FFFFFF; margin-bottom: 16px;">Shop title</h1>
            <p style="color: #FFFFFF; font-size: 24px; line-height: 1.4; margin-bottom: 40px;">Subheading with description of your shopping site</p>
            <a href="#products" class="btn btn-primary btn-lg">Button</a>
        </div>
    </section>

    <!-- Featured Content Sections -->
    <div style="display: grid; grid-template-columns: 516px 1fr; gap: 80px; margin-bottom: 80px;">
        <div style="display: flex; flex-direction: column; gap: 24px;">
            <h2 style="margin: 0;">Heading</h2>
            <p style="margin: 0;">A subheading for this section, as long or as short as you like</p>
            <div style="display: flex; gap: 16px;">
                <a href="#" class="btn btn-primary">Button</a>
                <a href="#" class="btn btn-secondary">Secondary button</a>
            </div>
        </div>
        <div style="width: 625px; height: 400px; background-color: #F7F7F7; border-radius: 8px;"></div>
    </div>

    <div style="display: grid; grid-template-columns: 624px 1fr; gap: 80px; margin-bottom: 80px;">
        <div style="width: 624px; height: 400px; background-color: #F7F7F7; border-radius: 8px;"></div>
        <div style="display: flex; flex-direction: column; gap: 24px;">
            <h2 style="margin: 0;">Heading</h2>
            <p style="margin: 0;">A subheading for this section, as long or as short as you like</p>
            <div style="display: flex; gap: 16px;">
                <a href="#" class="btn btn-primary">Button</a>
                <a href="#" class="btn btn-secondary">Secondary button</a>
            </div>
        </div>
    </div>

    <!-- Feature Lists -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 80px; margin-bottom: 80px;">
        <div style="display: flex; flex-direction: column; gap: 48px;">
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div style="width: 32px; height: 32px; background-color: #F7F7F7; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#828282">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                </div>
                <h4 style="margin: 0;">Subheading</h4>
                <p style="margin: 0;">Body text for whatever you'd like to say. Add main takeaway points, quotes, anecdotes, or even a very very short story.</p>
            </div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div style="width: 32px; height: 32px; background-color: #F7F7F7; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#828282">
                            <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM15.1 8H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                        </svg>
                    </div>
                </div>
                <h4 style="margin: 0;">Subheading</h4>
                <p style="margin: 0;">Body text for whatever you'd like to claim. Add main takeaway points, quotes, anecdotes, or even a very very short story.</p>
            </div>
        </div>
        <div style="display: flex; flex-direction: column; gap: 48px;">
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div style="width: 32px; height: 32px; background-color: #F7F7F7; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#828282">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                </div>
                <h4 style="margin: 0;">Subheading</h4>
                <p style="margin: 0;">Body text for whatever you'd like to suggest. Add main takeaway points, quotes, anecdotes, or even a very very short story.</p>
            </div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div style="width: 32px; height: 32px; background-color: #F7F7F7; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#828282">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                        </svg>
                    </div>
                </div>
                <h4 style="margin: 0;">Subheading</h4>
                <p style="margin: 0;">Body text for whatever you'd like to type. Add main takeaway points, quotes, anecdotes, or even a very very short story.</p>
            </div>
        </div>
    </div>

    <!-- Section Heading -->
    <h2 class="section-heading" id="products">Section heading</h2>

    <!-- Search and Filter Bar -->
    <div class="search-filter-bar">
        <form asp-action="Index" asp-controller="Products" method="get" class="d-flex gap-3 w-100">
            <select name="category" class="form-select filter-select" onchange="this.form.submit()">
                <option value="">All Categories</option>
                @foreach (var cat in ViewBag.Categories as List<string>)
                {
                    <option value="@cat" @(cat == (ViewBag.SelectedCategory as string) ? "selected" : "")>@cat</option>
                }
            </select>
            <div class="input-group search-input">
                <input type="text" name="searchTerm" class="form-control" placeholder="Search products..." value="@Context.Request.Query["searchTerm"]">
                <button class="btn btn-primary" type="submit">Search</button>
            </div>
        </form>
    </div>

    <!-- Featured Product -->
    <div style="display: grid; grid-template-columns: 735px 515px; gap: 32px; margin-bottom: 40px;">
        @if (Model.Any())
        {
            var featuredProduct = Model.First();
            <div class="product-image" style="height: 735px;">
                <img src="@featuredProduct.ImageUrl" alt="@featuredProduct.Name" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div style="display: flex; flex-direction: column; gap: 24px;">
                <h4 class="product-title">@featuredProduct.Name</h4>
                <p class="product-description">@featuredProduct.Description</p>
                <p class="product-price">$@featuredProduct.Price.ToString("0.00")</p>
                <form asp-action="AddToCart" asp-controller="Cart" method="post" style="margin-top: auto;">
                    <input type="hidden" name="productId" value="@featuredProduct.Id" />
                    <div class="form-group">
                        <select name="quantity" class="form-select" style="margin-bottom: 16px;">
                            @for (int i = 1; i <= 10; i++)
                            {
                                <option value="@i">@i</option>
                            }
                        </select>
                        <button type="submit" class="btn btn-primary w-100">Add to cart</button>
                    </div>
                </form>
            </div>
        }
    </div>

    <!-- Product List -->
    <div style="display: flex; flex-direction: column; gap: 40px;">
        @foreach (var product in Model.Skip(1))
        {
            <div style="display: flex; gap: 24px; align-items: start;">
                <div class="product-image" style="width: 515px; height: 240px; flex-shrink: 0;">
                    <img src="@product.ImageUrl" alt="@product.Name" style="width: 100%; height: 100%; object-fit: contain;">
                </div>
                <div style="display: flex; flex-direction: column; gap: 4px; flex-grow: 1;">
                    <h4 class="product-title">@product.Name</h4>
                    <p class="product-description">@product.Description</p>
                    <p class="product-price">$@product.Price.ToString("0.00")</p>
                    <form asp-action="AddToCart" asp-controller="Cart" method="post" style="margin-top: 16px;">
                        <input type="hidden" name="productId" value="@product.Id" />
                        <div style="display: flex; gap: 16px; align-items: end;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <select name="quantity" class="form-select" style="width: 100px;">
                                    @for (int i = 1; i <= 10; i++)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Add to cart</button>
                            <a href="@Url.Action("Details", "Products", new { id = product.Id })" class="btn btn-secondary">View Details</a>
                        </div>
                    </form>
                </div>
            </div>
        }
    </div>
</div>

@section Scripts {
    <script>
        function filterByCategory() {
            var category = document.getElementById('categoryFilter').value;
            window.location.href = '/Products/Index' + (category ? '?category=' + category : '');
        }
    </script>
}